(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{37:function(e,t,n){e.exports=n.p+"static/media/logo.fab25a65.jpg"},39:function(e,t,n){e.exports=n(83)},67:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},79:function(e,t,n){},80:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){},83:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(20),i=n.n(o),c=n(15),l=n(2),s=n(35),u=n(38),d=n(16),p=function(e,t){return Object(d.a)({},e,t)},m={ingredients:[],totalPrice:0,loading:!1},g={meat:20,bacon:15,cheese:10,salad:5,bread:3},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_INGREDIENTS":return p(e,{ingredients:[].concat(Object(u.a)(e.ingredients),[t.ingredient]),totalPrice:e.totalPrice+g[t.ingredient.type]});case"REMOVE_INGREDIENT":return p(e,{ingredients:e.ingredients.filter(function(e){return e.id!==t.ingredient.id}),totalPrice:e.totalPrice-g[t.ingredient.type]});case"CLEAR_STATE":return p(e,{ingredients:[],totalPrice:0});default:return e}},E={orders:null,loading:!1},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ORDERS_START":return p(e,{loading:!0});case"GET_ORDERS":return p(e,{orders:t.ingredients,loading:!1});default:return e}},v={token:null,error:!1,errorMessage:null},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SIGNUP_START":case"ON_SIGN_METHOD_CHANGE":return p(e,{error:!1});case"SIGNUP_SUCCESS":return p(e,{token:t.token});case"SIGNUP_ERROR":return p(e,{error:!0,errorMessage:t.error.response.data.error.message});case"LOGOUT":return window.localStorage.clear(),p(e,{token:null});case"GET_LOCAL_TOKEN":return p(e,{token:window.localStorage.getItem("token")});default:return e}},y=n(4),O=n(5),k=n(7),N=n(6),S=n(8),j=n(13),I=n(14),T=n(22),w=n.n(T),_=w.a.create({baseURL:"https://react-burgerbuilder-14d6b.firebaseio.com"}),C=function(){return function(e){e({type:"GET_ORDERS_START"});var t=window.localStorage.getItem("token");_.get("/orders.json?auth=".concat(t)).then(function(t){e({type:"GET_ORDERS",ingredients:t.data})})}},A=function(e){return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",null,e.children))},R=(n(67),function(e){var t=e.ingredients.map(function(t){return a.a.createElement("div",{className:"ingregient "+t.type,type:t.type,key:t.id,onClick:function(){return e.remove(t)}})});return e.ingredients.length<=0&&(t=a.a.createElement("p",null,"Introduce some ingredients")),a.a.createElement("div",{className:"burger"},a.a.createElement("div",{className:"ingregient bread-top"}),t,a.a.createElement("div",{className:"ingregient bread-bottom"}))}),D=(n(68),function(e){return a.a.createElement("button",{className:"component-btn "+e.type,onClick:e.clicked,disabled:e.disabled},e.children)}),L=function(e){var t=["bacon","meat","salad","cheese","bread"].map(function(t){return a.a.createElement(D,{clicked:function(){return e.clicked(t)},key:t,type:"ingredient-btn"},"add ",t)});return a.a.createElement("div",{className:"add-ingridients"},t)},M=(n(69),function(e){function t(){var e,n;Object(y.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(k.a)(this,(e=Object(N.a)(t)).call.apply(e,[this].concat(a)))).randomKey=function(){return Math.random().toString().substr(2,9)},n.addIngredientHandler=function(e){var t={id:n.randomKey(),type:e};n.props.addIngredients(t)},n.checkIfDisabled=function(){return 0===n.props.price},n.sendOrderHandler=function(){n.props.history.push("/checkout")},n}return Object(S.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this.props,t=e.price,n=e.ingredients,r=e.removeIngredient;return a.a.createElement("div",{className:"burger-builder"},a.a.createElement(R,{ingredients:n,remove:r}),a.a.createElement("div",{className:"burger-controls"},a.a.createElement(L,{clicked:this.addIngredientHandler}),a.a.createElement("div",{className:"checkout-summary"},a.a.createElement("div",{className:"total-price"},"Total price: ",a.a.createElement("strong",null,t)," $"),a.a.createElement(D,{type:"success",disabled:this.checkIfDisabled(),clicked:this.sendOrderHandler},"checkout"))))}}]),t}(r.Component)),G=Object(l.b)(function(e){return{ingredients:e.burger.ingredients,price:e.burger.totalPrice}},function(e){return{addIngredients:function(t){return e({type:"ADD_INGREDIENTS",ingredient:t})},removeIngredient:function(t){return e({type:"REMOVE_INGREDIENT",ingredient:t})}}})(M),U=function(e){var t=null;switch(e){case"text":t=/[a-zA-Z]*/g;break;case"email":t=/.{3,}?@.+[.].+/g;break;case"password":t=/^.{6,20}$/g;break;default:t=/[a-zA-Z]*/g}return t},P=(n(70),function(e){return a.a.createElement("div",{className:"error "+e.className},e.children)}),H=(n(71),function(e){function t(){var e,n;Object(y.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(k.a)(this,(e=Object(N.a)(t)).call.apply(e,[this].concat(a)))).state={customerInformation:{name:"",city:"",email:""},validated:!1,noIngredients:!1,loginError:!1},n.onChange=function(e){var t=n.state.customerInformation,r=Object(d.a)({},t),a=U(e.target.type);e.target.value.match(a)||(e.target.className="error-input"),e.target.value.match(a)&&(e.target.className="validated-input",r[e.target.name]=e.target.value,n.setState({customerInformation:r})),0===Object.keys(t).filter(function(e){return""===t[e]}).length&&n.setState({validated:!0})},n.orderBurger=function(e){e.preventDefault();var t=n.props,r=t.token,a=t.ingredients,o=t.price;0===a.length&&n.setState({noIngredients:!0}),n.props.token||n.setState({loginError:!0}),n.state.validated&&a.length>0&&null!==n.props.token&&_.post("orders.json?auth=".concat(r),{ingredients:a,customer:n.state.customerInformation,price:o}).then(function(e){n.props.clearIngredients(),n.props.history.push("/orders")})},n.pushToMain=function(){n.props.history.push("/")},n}return Object(S.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this.state,t=e.customerInformation,n=e.noIngredients,r=e.loginError,o=null;return n?a.a.createElement(P,null,a.a.createElement("p",null,"Sorry but you can't order a burger, without ingredients"),a.a.createElement(D,{type:"primary",clicked:this.pushToMain},"go back and add some")):(r&&(o=a.a.createElement(P,null,a.a.createElement("p",null,"You must be logged in to order a burger"))),a.a.createElement("div",{className:"check-out-form"},a.a.createElement("form",{onSubmit:this.orderBurger},a.a.createElement("input",{type:"text",placeholder:"Enter your name",value:t.name,name:"name",onChange:this.onChange}),a.a.createElement("input",{type:"text",placeholder:"Enter your City",value:t.city,name:"city",onChange:this.onChange}),a.a.createElement("input",{type:"email",placeholder:"Enter your Email",value:t.street,name:"email",onChange:this.onChange}),a.a.createElement(D,{type:"primary"},"Order Burger"),o)))}}]),t}(r.Component)),x=Object(l.b)(function(e){return{ingredients:e.burger.ingredients,price:e.burger.totalPrice,token:e.auth.token}},function(e){return{clearIngredients:function(){return e({type:"CLEAR_STATE"})}}})(H),B=(n(72),function(){return a.a.createElement("div",{className:"lds-roller"},a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null))}),K=function(e){return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"order-wrapper"},a.a.createElement(R,{ingredients:e.ingredients,remove:e.orderRemoveError})),a.a.createElement("div",{style:{textAlign:"center",marginTop:"20px"}},a.a.createElement(D,{type:"danger",clicked:e.clicked},"Remove")))},V=(n(73),function(e){function t(){var e,n;Object(y.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(k.a)(this,(e=Object(N.a)(t)).call.apply(e,[this].concat(a)))).state={activeError:!1},n.removeOrderHandler=function(e){n.props.removeOrder(e,n.props.token)},n.pushToMain=function(){n.props.history.push("/")},n}return Object(S.a)(t,e),Object(O.a)(t,[{key:"componentDidMount",value:function(){this.props.token&&this.props.getOrders(this.props.orders)}},{key:"render",value:function(){var e=this,t=this.props,n=t.orders,r=t.loading,o=null;return t.token?r?a.a.createElement(B,null):n?(o=Object.keys(n).map(function(t){return a.a.createElement("div",{key:t,className:"one-order"},a.a.createElement("div",{className:"order-price"},"Burger Price: ",a.a.createElement("strong",null,n[t].price)," "),a.a.createElement(K,{ingredients:n[t].ingredients,clicked:function(){return e.removeOrderHandler(t)},orderRemoveError:function(){}}))}),a.a.createElement("div",{className:"orders"},o)):a.a.createElement(P,{className:"no-items"},a.a.createElement("p",null,"Looks like you have no orders yet"),a.a.createElement(D,{type:"primary",clicked:this.pushToMain},"go back and create them")):a.a.createElement(I.a,{to:"/"})}}]),t}(r.Component)),X=Object(l.b)(function(e){return{orders:e.orders.orders,loading:e.orders.loading,token:e.auth.token}},function(e){return{getOrders:function(){return e(C())},removeOrder:function(t,n){return e(function(e,t){return function(n){_.delete("/orders/".concat(e,".json?auth=").concat(t)).then(function(e){n(C(t))})}}(t,n))},getToken:function(){return e({type:"GET_LOCAL_TOKEN"})}}})(V),z=(n(79),function(e){function t(){var e,n;Object(y.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(k.a)(this,(e=Object(N.a)(t)).call.apply(e,[this].concat(a)))).state={userData:{email:{value:"",validated:!1},password:{value:"",validated:!1}},signUp:!0},n.changeSignMethod=function(e){e.preventDefault(),n.props.onSignMethodChange(),n.setState(function(){return{signUp:!n.state.signUp}})},n.onChangeHandler=function(e){var t=n.state.userData;0===Object.keys(t).length&&n.setState({validated:!0});var r=Object(d.a)({},t);r[e.target.type].value=e.target.value;var a=U(e.target.type);e.target.value.match(a)||(e.target.className="error-input",r[e.target.type].validated=!1),e.target.value.match(a)&&(e.target.className="validated-input",r[e.target.type].validated=!0),n.setState({userData:r})},n.errorMessagesHandler=function(e){var t="";switch(e){case"EMAIL_EXISTS":t="An account with this email already exists";break;case"INVALID_PASSWORD":t="Your password is incorect";break;case"EMAIL_NOT_FOUND":t="Your email is incorect";break;default:return t}return t},n.handleAuth=function(e){var t=n.state.userData,r=t.email,a=t.password;e.preventDefault(),r.validated&&a.validated&&n.props.auth(r.value,a.value,n.state.signUp)},n}return Object(S.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this.state,t=e.email,n=e.password,r=e.signUp,o=this.props.error?a.a.createElement(P,null,this.errorMessagesHandler(this.props.errorMessage)):null;return a.a.createElement("div",null,a.a.createElement("form",{className:"signup-form"},a.a.createElement("input",{type:"email",placeholder:"Enter your email",value:t,onChange:this.onChangeHandler}),a.a.createElement("input",{type:"password",placeholder:"Enter your password",value:n,onChange:this.onChangeHandler}),a.a.createElement(D,{type:"success",clicked:this.changeSignMethod},"change to ",r?"Sign In":"Sign Up"),a.a.createElement(D,{type:"primary",clicked:this.handleAuth},r?"Register":"Login"),o),this.props.isLogged?a.a.createElement(I.a,{to:"/"}):null)}}]),t}(r.Component)),F=Object(l.b)(function(e){return{error:e.auth.error,isLogged:null!==e.auth.token,errorMessage:e.auth.errorMessage}},function(e){return{auth:function(t,n,r){return e(function(e,t,n){return function(r){r(function(e,t){return{type:"SIGNUP_START",userData:{email:e,password:t}}}());var a={email:e,password:t,returnSecureToken:!0},o="".concat("https://www.googleapis.com/identitytoolkit/v3/relyingparty/").concat(n?"signupNewUser":"verifyPassword","?key=").concat("AIzaSyCc5raNAqXtAAyN9cg551OOGoLV4_UZM98");w.a.post(o,a).then(function(e){r({type:"SIGNUP_SUCCESS",token:e.data.idToken}),localStorage.setItem("token",e.data.idToken),localStorage.setItem("expires",e.data.expiresIn),setTimeout(function(){r({type:"LOGOUT"})},1e3*e.data.expiresIn)}).catch(function(e){r(function(e){return{type:"SIGNUP_ERROR",error:e}}(e))})}}(t,n,r))},onSignMethodChange:function(){return e({type:"ON_SIGN_METHOD_CHANGE"})}}})(z),Y=(n(80),n(37)),Z=n.n(Y),J=function(e){function t(){var e,n;Object(y.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(k.a)(this,(e=Object(N.a)(t)).call.apply(e,[this].concat(a)))).logOutHandler=function(){n.props.isLogged&&n.props.logOut()},n}return Object(S.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"header"},a.a.createElement("div",{className:"header-navigation"},a.a.createElement(j.b,{exact:!0,to:"/"},"Burger Builder"),this.props.isLogged?a.a.createElement(j.b,{to:"/orders"},"Orders"):null,a.a.createElement(j.b,{to:"/signup",onClick:this.logOutHandler},this.props.isLogged?"Logout":"Sign Up")),a.a.createElement("div",{className:"header-logo"},a.a.createElement("div",{className:"logo-wrapper"},a.a.createElement("img",{src:Z.a,alt:"logo"}))))}}]),t}(r.Component),$=Object(l.b)(function(e){return{isLogged:null!==e.auth.token}},function(e){return{logOut:function(){return e({type:"LOGOUT"})}}})(J),q=(n(81),function(e){function t(){return Object(y.a)(this,t),Object(k.a)(this,Object(N.a)(t).apply(this,arguments))}return Object(S.a)(t,e),Object(O.a)(t,[{key:"componentDidMount",value:function(){this.props.token()}},{key:"render",value:function(){return a.a.createElement(j.a,{basename:"React-Burger"},a.a.createElement($,null),a.a.createElement(A,null,a.a.createElement(I.b,{path:"/",exact:!0,component:G}),a.a.createElement(I.b,{path:"/orders",component:X}),a.a.createElement(I.b,{path:"/checkout",component:x}),a.a.createElement(I.b,{path:"/signup",component:F})))}}]),t}(r.Component)),W=Object(l.b)(function(e){return{isLogged:null!==e.auth.token}},function(e){return{token:function(){return e({type:"GET_LOCAL_TOKEN"})}}})(q),Q=(n(82),Object(c.c)({burger:h,orders:f,auth:b})),ee=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||c.d,te=Object(c.e)(Q,ee(Object(c.a)(s.a))),ne=a.a.createElement(l.a,{store:te},a.a.createElement(W,null));i.a.render(ne,document.getElementById("app"))}},[[39,1,2]]]);
//# sourceMappingURL=main.ff4d5ef0.chunk.js.map